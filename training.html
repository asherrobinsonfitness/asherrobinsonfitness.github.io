<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>Learn How to Lose Your First 10 Pounds</title>
    <meta name="description" content="This free training reveals the simple, science backed steps to lose your first 10 pounds. Designed for real people who want lasting results.">
    <meta name="robots" content="index, follow">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    
    <!-- Preconnect to critical domains -->
    <link rel="preconnect" href="https://fast.wistia.com" crossorigin>
    <link rel="dns-prefetch" href="https://fast.wistia.com">
    <link rel="dns-prefetch" href="https://api.cal.com">
    <link rel="preconnect" href="https://api.cal.com" crossorigin>
    
    <!-- Preload critical assets -->
    <link rel="preload" href="https://fast.wistia.com/player.js" as="script">
    <link rel="preload" href="https://fast.wistia.com/embed/3aqpq8ejan.js" as="script">
    
    <!-- Google tag (gtag.js) - deferred -->
    <script>
    window.addEventListener('load', function() {
        var script = document.createElement('script');
        script.async = true;
        script.src = 'https://www.googletagmanager.com/gtag/js?id=G-1QLJZQBQ89';
        document.head.appendChild(script);
        
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
        gtag('config', 'G-1QLJZQBQ89', {
            'cookie_flags': 'SameSite=None;Secure'
        });
    });
    </script>
    
    <style>
        :root {
            --space-1: 0.5rem;
            --space-2: 1rem;
            --space-3: 1.5rem;
            --space-4: 2rem;
            --space-5: 2.5rem;
            --space-6: 3rem;
            --form-gap: 1rem;
            --primary: #1877F2;
            --background: #f8f9fa;
            --text: #222222;
            --text-secondary: #717171;
            --border: #c1c7cd;
            --card-bg: #fff;
            --error: #ff3b30;
            --success: #4cd964;
            --divider: #E8EAED;
            --premium-shadow: 0 8px 30px rgba(0, 0, 0, 0.07);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, sans-serif;
        }

        body {
            background: var(--background);
            color: var(--text);
            line-height: 1.5;
            font-size: 16px;
            -webkit-font-smoothing: antialiased;
        }

        .container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding: var(--space-6) 0 var(--space-6);
        }

        .content {
            margin: 0 auto;
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: var(--space-5);
            width: 100%;
            max-width: 500px;
            padding: 0 1.5rem;
        }
        
        .headline {
            font-size: 2.5rem;
            font-weight: 700;
            line-height: 1.15;
            margin-bottom: var(--space-2);
            letter-spacing: -0.015em;
            color: var(--text);
        }

        .subheadline {
            font-size: 1.25rem;
            color: var(--text-secondary);
            line-height: 1.5;
            letter-spacing: -0.005em;
            max-width: 450px;
            margin: 0 auto;
        }
        
        .report-img {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
            border-radius: 8px;
        }
        
        .video-container {
            position: relative;
            width: 100%;
            height: 0;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            overflow: hidden;
        }
        
        .video-container wistia-player {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .form-title {
            color: var(--text);
            font-weight: 700;
            font-size: 1.125rem;
            line-height: 1.2;
            padding: 0;
            background-color: var(--background);
            text-align: left;
            margin-bottom: var(--space-1);
        }

        .form-subtitle {
            color: var(--text);
            font-size: 1.125rem;
            margin-bottom: var(--space-3);
            line-height: 1.4;
            text-align: left;
        }
        
        /* Calendar wrapper styles */
        .calendar-wrapper {
            width: 100%;
            max-width: 450px;
            margin: 0 auto;
            background-color: var(--background);
        }
        
        @media (max-width: 768px) {
            .container {
                padding: var(--space-4) 0 var(--space-6);
            }

            .content {
                gap: var(--space-4);
                padding: 0 1.25rem;
            }

            .headline {
                font-size: 1.875rem;
            }

            .subheadline {
                font-size: 1rem;
            }
            
            .form-title {
                font-size: 1rem;
            }

            .form-subtitle {
                font-size: 0.875rem;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="content" id="mainContent">
            <div class="header-group">
                <h1 class="headline">Learn How to Lose Your First 10 Pounds</h1>
                <p class="subheadline">This free training reveals the simple, science backed steps to lose your first 10 pounds. Designed for real people who want lasting results.</p>
            </div>

            <div id="reportImage" class="report-img video-container">
                <script src="https://fast.wistia.com/player.js" async></script>
                <script src="https://fast.wistia.com/embed/3aqpq8ejan.js" async type="module"></script>
                <style>wistia-player[media-id='3aqpq8ejan']:not(:defined) { background: center / contain no-repeat url('https://fast.wistia.com/embed/medias/3aqpq8ejan/swatch'); display: block; filter: blur(5px); padding-top:56.25%; }</style>
                <wistia-player media-id="3aqpq8ejan" seo="false" aspect="1.7777777777777777"></wistia-player>
            </div>

            <div class="form-wrapper">
                <div class="form-title">Contact Information</div>
                <p class="form-subtitle">Enter your details below to get the free training.</p>
                
                <!-- Cal.com Calendar Section -->
                <div id="calendarSection" class="calendar-wrapper">
                <!-- Cal inline embed code begins -->
                <div style="width:100%;height:100%;border-radius:12px;overflow:hidden;border:1px solid var(--border);box-shadow:var(--premium-shadow);" id="my-cal-inline"></div>
                <script type="text/javascript">
                    (function(C, A, L) {
                        let p = function(a, ar) {
                            a.q.push(ar);
                        };
                        let d = C.document;
                        C.Cal = C.Cal || function() {
                            let cal = C.Cal;
                            let ar = arguments;
                            if (!cal.loaded) {
                                cal.ns = {};
                                cal.q = cal.q || [];
                                d.head.appendChild(d.createElement("script")).src = A;
                                cal.loaded = true;
                            }
                            if (ar[0] === L) {
                                const api = function() {
                                    p(api, arguments);
                                };
                                const namespace = ar[1];
                                api.q = api.q || [];
                                if (typeof namespace === "string") {
                                    cal.ns[namespace] = cal.ns[namespace] || api;
                                    p(cal.ns[namespace], ar);
                                    p(cal, ["initNamespace", namespace]);
                                } else p(cal, ar);
                                return;
                            }
                            p(cal, ar);
                        };
                    })(window, "https://app.cal.com/embed/embed.js", "init");

                    // Get URL parameters
                    const urlParams = new URLSearchParams(window.location.search);
                    const email = urlParams.get('email') || "";
                    const firstName = urlParams.get('firstName') || "";
                    const lastName = urlParams.get('lastName') || "";
                    let phone = urlParams.get('phone') || "";
                    const name = firstName && lastName ? `${firstName} ${lastName}` : (firstName || lastName || "");

                    // Format phone number with country code if needed
                    function formatPhoneWithCountryCode(phoneNumber) {
                        // Remove all non-digit characters
                        const digitsOnly = phoneNumber.replace(/\D/g, '');

                        // If the number doesn't start with a country code (assuming US +1)
                        if (digitsOnly.length === 10) {
                            return "+1" + digitsOnly;
                        }
                        // If it's already formatted with country code but missing + symbol
                        else if (digitsOnly.length === 11 && digitsOnly.startsWith('1')) {
                            return "+" + digitsOnly;
                        }
                        // If it's some other format, just add + if missing
                        else if (digitsOnly.length > 0 && !phoneNumber.includes('+')) {
                            return "+" + digitsOnly;
                        }

                        // Return original if already properly formatted or empty
                        return phoneNumber;
                    }

                    // Format the phone number
                    const formattedPhone = formatPhoneWithCountryCode(phone);

                    // Initialize Cal
                    Cal("init");

                    // Use the direct inline method with prefill config
                    Cal("inline", {
                        elementOrSelector: "#my-cal-inline",
                        calLink: "busy-barbell/30min",
                        config: {
                            name: name,
                            email: email,
                            phone: formattedPhone,
                            smsReminderNumber: formattedPhone,
                            notes: phone ? `Phone: ${formattedPhone}` : "",
                            theme: "light",
                            layout: "month_view",
                            hideEventTypeDetails: true,
                            hideCalendarNotes: true,
                            hideDescription: true,
                            cssVars: {
                                "cal-brand": "#0069ff"
                            }
                        },
                        ui: {
                            hideEventTypeDetails: true,
                            hideCalendarNotes: true,
                            hideDescription: true
                        }
                    });

                    // Also set UI configuration separately to ensure it applies
                    Cal("ui", {
                        theme: "light",
                        styles: {
                            branding: {
                                brandColor: "#0069ff"
                            }
                        },
                        hideEventTypeDetails: true,
                        hideCalendarNotes: true,
                        hideDescription: true
                    });
                </script>
                <!-- Cal inline embed code ends -->
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Handle console errors gracefully
            window.addEventListener('error', function(e) {
                // Prevent default error handling
                e.preventDefault();
                return true;
            });
            
            // Add SameSite and Secure attributes to cookies
            document.cookie = "SameSite=None; Secure";
        });
    </script>
</body>

</html>
